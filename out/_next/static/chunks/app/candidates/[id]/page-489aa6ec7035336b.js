(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[651],{35024:function(e,s,a){Promise.resolve().then(a.bind(a,81523)),Promise.resolve().then(a.bind(a,70049)),Promise.resolve().then(a.bind(a,54696))},54696:function(e,s,a){"use strict";a.r(s),a.d(s,{CandidateDetailClient:function(){return es}});var l=a(57437),t=a(2265),n=a(99376),r=a(79820),i=a(12381),c=a(69174),d=a(96246),o=a(17168),m=a(7204),x=a(69140),u=a(95937),h=a(32660),f=a(68919),j=a(61178),p=a(83774),N=a(95805),g=a(31047),v=a(49474),y=a(46221),b=a(82718),w=a(66116),z=a(49027),Z=a(32489),k=a(93448);let C=z.fC;z.xz;let A=z.h_;z.x8;let O=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)(z.aV,{ref:s,className:(0,k.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...t})});O.displayName=z.aV.displayName;let S=t.forwardRef((e,s)=>{let{className:a,children:t,...n}=e;return(0,l.jsxs)(A,{children:[(0,l.jsx)(O,{}),(0,l.jsxs)(z.VY,{ref:s,className:(0,k.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n,children:[t,(0,l.jsxs)(z.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,l.jsx)(Z.Z,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});S.displayName=z.VY.displayName;let R=e=>{let{className:s,...a}=e;return(0,l.jsx)("div",{className:(0,k.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...a})};R.displayName="DialogHeader";let E=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)(z.Dx,{ref:s,className:(0,k.cn)("text-lg font-semibold leading-none tracking-tight",a),...t})});E.displayName=z.Dx.displayName;let I=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)(z.dk,{ref:s,className:(0,k.cn)("text-sm text-muted-foreground",a),...t})});I.displayName=z.dk.displayName;var Y=a(71769),D=a(96362),_=a(73247),P=a(45446);function U(e){let{policy:s,className:a}=e,t=e=>e>=80?"text-green-600":e>=60?"text-yellow-600":e>=40?"text-orange-600":"text-red-600",n=e=>e>=80?"高":e>=60?"中":e>=40?"低":"困難",i=e=>e>=80?"default":e>=60?"secondary":"destructive";return(0,l.jsxs)(r.Zb,{className:a,children:[(0,l.jsx)(r.Ol,{children:(0,l.jsx)(r.ll,{className:"text-lg",children:"詳細スコア内訳"})}),(0,l.jsxs)(r.aY,{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"text-center p-4 bg-muted rounded-lg",children:[(0,l.jsxs)("div",{className:"text-3xl font-bold text-primary mb-2",children:[s.feasibilityScore,"%"]}),(0,l.jsx)("div",{className:"text-sm text-muted-foreground",children:"総合実現可能性スコア"}),(0,l.jsx)(m.E,{value:s.feasibilityScore,className:"mt-3 h-3"})]}),(0,l.jsx)("div",{className:"space-y-4",children:["technical","political","financial","timeline"].map(e=>{let a=s.detailedEvaluation[e];return(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("h4",{className:"font-semibold text-sm",children:(0,k.Ml)(e)}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(c.C,{variant:i(a.score),children:n(a.score)}),(0,l.jsxs)("span",{className:"text-lg font-bold ".concat(t(a.score)),children:[a.score,"%"]})]})]}),(0,l.jsx)(m.E,{value:a.score,className:"h-2"}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground line-clamp-2",children:a.summary})]},e)})}),(0,l.jsxs)("div",{className:"border-t pt-4 space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,l.jsx)("span",{className:"text-muted-foreground",children:"政策影響度"}),(0,l.jsx)(c.C,{variant:"high"===s.impact?"default":"secondary",children:"high"===s.impact?"高影響":"medium"===s.impact?"中影響":"低影響"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,l.jsx)("span",{className:"text-muted-foreground",children:"分析方法"}),(0,l.jsx)("span",{className:"font-medium",children:"gemini"===s.analyzedBy?"Gemini AI":"claude"===s.analyzedBy?"Claude AI":"perplexity"===s.analyzedBy?"Perplexity AI":"手動分析"})]}),s.analyzedAt&&(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,l.jsx)("span",{className:"text-muted-foreground",children:"分析日時"}),(0,l.jsx)("span",{className:"font-medium",children:new Date(1e3*s.analyzedAt.seconds).toLocaleDateString("ja-JP")})]})]})]})]})}function B(e){let{policy:s,open:a,onOpenChange:t}=e;if(!s)return null;let n=["technical","political","financial","timeline"];return(0,l.jsx)(C,{open:a,onOpenChange:t,children:(0,l.jsxs)(S,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,l.jsxs)(R,{children:[(0,l.jsx)(E,{className:"text-xl",children:s.title}),(0,l.jsx)(I,{children:"詳細な政策評価レポート"})]}),(0,l.jsxs)("div",{className:"flex-1 overflow-auto space-y-6",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,l.jsx)(P.x,{policy:s}),(0,l.jsx)(U,{policy:s})]}),(0,l.jsxs)(r.Zb,{children:[(0,l.jsx)(r.Ol,{children:(0,l.jsx)(r.ll,{className:"text-lg",children:"政策概要"})}),(0,l.jsx)(r.aY,{children:(0,l.jsx)("p",{className:"text-sm leading-relaxed",children:s.description})})]}),(0,l.jsxs)(o.mQ,{defaultValue:"technical",className:"w-full",children:[(0,l.jsx)(o.dr,{className:"grid w-full grid-cols-4",children:n.map(e=>(0,l.jsx)(o.SP,{value:e,children:(0,k.Ml)(e)},e))}),n.map(e=>{let a=s.detailedEvaluation[e];return(0,l.jsx)(o.nU,{value:e,className:"space-y-4",children:(0,l.jsxs)(r.Zb,{children:[(0,l.jsx)(r.Ol,{children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)(r.ll,{className:"text-lg",children:[(0,k.Ml)(e),"評価"]}),(0,l.jsx)("div",{className:"text-right",children:(0,l.jsxs)("span",{className:"text-3xl font-bold text-primary",children:[a.score,"%"]})})]})}),(0,l.jsxs)(r.aY,{className:"space-y-4",children:[(0,l.jsx)(m.E,{value:a.score,className:"h-3"}),(0,l.jsxs)("div",{className:"bg-muted p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold mb-2",children:"評価要約"}),(0,l.jsx)("p",{className:"text-sm",children:a.summary})]}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("h4",{className:"font-semibold flex items-center gap-2",children:[(0,l.jsx)(Y.Z,{className:"h-4 w-4"}),"詳細分析"]}),(0,l.jsx)("div",{className:"bg-background border rounded-lg p-4 max-h-[300px] overflow-y-auto",children:(0,l.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,l.jsx)("p",{className:"whitespace-pre-wrap text-sm leading-relaxed",children:a.report})})})]}),a.references&&a.references.length>0&&(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("h4",{className:"font-semibold flex items-center gap-2",children:[(0,l.jsx)(D.Z,{className:"h-4 w-4"}),"参考資料"]}),(0,l.jsx)("div",{className:"space-y-2",children:a.references.map((e,s)=>(0,l.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-muted rounded text-sm",children:[(0,l.jsx)(D.Z,{className:"h-3 w-3 text-muted-foreground shrink-0"}),(0,l.jsx)("span",{children:e})]},s))})]}),a.searchKeywords&&a.searchKeywords.length>0&&(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("h4",{className:"font-semibold flex items-center gap-2",children:[(0,l.jsx)(_.Z,{className:"h-4 w-4"}),"関連検索キーワード"]}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:a.searchKeywords.map((e,s)=>(0,l.jsx)(c.C,{variant:"secondary",className:"text-xs",children:e},s))})]})]})]})},e)})]}),(0,l.jsxs)(r.Zb,{children:[(0,l.jsx)(r.Ol,{children:(0,l.jsx)(r.ll,{className:"text-lg",children:"分析情報"})}),(0,l.jsxs)(r.aY,{children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-muted-foreground",children:"分析方法:"}),(0,l.jsx)("span",{className:"ml-2 font-medium",children:"gemini"===s.analyzedBy?"Gemini AI":"claude"===s.analyzedBy?"Claude AI":"perplexity"===s.analyzedBy?"Perplexity AI":"手動分析"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-muted-foreground",children:"分析日時:"}),(0,l.jsx)("span",{className:"ml-2 font-medium",children:s.analyzedAt?new Date(1e3*s.analyzedAt.seconds).toLocaleDateString("ja-JP"):"不明"})]})]}),s.sourceUrl&&(0,l.jsx)("div",{className:"mt-4 pt-4 border-t",children:(0,l.jsxs)(i.z,{variant:"outline",size:"sm",className:"w-full",onClick:()=>window.open(s.sourceUrl,"_blank"),children:[(0,l.jsx)(D.Z,{className:"h-4 w-4 mr-2"}),"元の資料を見る"]})})]})]})]})]})})}var V=a(29501),F=a(13590),$=a(67119);let Q=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)("textarea",{className:(0,k.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...t})});Q.displayName="Textarea";var q=a(67782),G=a(46211),L=a(31810),J=a(32060),T=a(85687),X=a(73634);let K=$.Ry({text:$.Z_().min(1,"コメントを入力してください").max(1e3,"コメントは1000文字以内で入力してください")});function M(e){let{candidateId:s,policyId:a,preview:n=!1,maxComments:c=n?3:void 0}=e,{user:o,userData:m}=(0,T.a)(),[x,u]=(0,t.useState)([]),[h,f]=(0,t.useState)(!0),[j,p]=(0,t.useState)(!1),{register:N,handleSubmit:g,reset:v,formState:{errors:y}}=(0,V.cI)({resolver:(0,F.F)(K)});(0,t.useEffect)(()=>{if(s)return(0,X.li)(s,e=>{let s=a?e.filter(e=>e.policyId===a):e.filter(e=>!e.policyId);u(c?s.slice(0,c):s),f(!1)},a)},[s,a,c]);let w=async e=>{if(o&&m){p(!0);try{await (0,X.Ir)({candidateId:s,policyId:a,userId:o.uid,userName:m.name,userAvatar:m.avatar,text:e.text,moderationScore:.9}),v()}catch(e){}finally{p(!1)}}},z=async(e,s)=>{if(o)try{s?await (0,X.Gb)(e,o.uid):await (0,X.xG)(e,o.uid)}catch(e){}};return h?(0,l.jsx)("div",{className:"space-y-4",children:Array.from({length:3}).map((e,s)=>(0,l.jsx)(r.Zb,{className:"p-4",children:(0,l.jsxs)("div",{className:"flex space-x-3",children:[(0,l.jsx)("div",{className:"h-10 w-10 rounded-full bg-muted animate-pulse"}),(0,l.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,l.jsx)("div",{className:"h-4 bg-muted rounded animate-pulse"}),(0,l.jsx)("div",{className:"h-4 bg-muted rounded w-3/4 animate-pulse"})]})]})},s))}):(0,l.jsxs)("div",{className:"space-y-4",children:[!n&&o&&(0,l.jsx)(r.Zb,{className:"p-4",children:(0,l.jsxs)("form",{onSubmit:g(w),className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex space-x-3",children:[(0,l.jsxs)(d.qE,{className:"h-10 w-10",children:[(0,l.jsx)(d.F$,{src:null==m?void 0:m.avatar}),(0,l.jsx)(d.Q5,{children:null==m?void 0:m.name[0]})]}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)(Q,{...N("text"),placeholder:a?"この政策についてあなたの意見を聞かせてください...":"この候補者についてあなたの意見を聞かせてください...",className:"min-h-[100px] resize-none",disabled:j}),y.text&&(0,l.jsx)("p",{className:"text-sm text-destructive mt-1",children:y.text.message})]})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"建設的な議論を心がけましょう。不適切な投稿は自動的に非表示になります。"}),(0,l.jsx)(i.z,{type:"submit",disabled:j,children:j?"投稿中...":"投稿する"})]})]})}),!n&&!o&&(0,l.jsxs)(r.Zb,{className:"p-4 text-center",children:[(0,l.jsx)("p",{className:"text-muted-foreground mb-4",children:"コメントを投稿するにはログインが必要です"}),(0,l.jsx)(i.z,{variant:"outline",children:"ログイン"})]}),(0,l.jsx)("div",{className:"space-y-3",children:x.length>0?x.map(e=>(0,l.jsx)(W,{comment:e,currentUserId:null==o?void 0:o.uid,onLike:z,isPreview:n},e.id)):(0,l.jsxs)(r.Zb,{className:"p-8 text-center",children:[(0,l.jsx)(b.Z,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),(0,l.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"まだコメントがありません"}),(0,l.jsxs)("p",{className:"text-muted-foreground",children:[a?"この政策":"この候補者","について最初にコメントしてみませんか？"]})]})}),n&&x.length===c&&(0,l.jsx)("div",{className:"text-center",children:(0,l.jsx)(i.z,{variant:"outline",children:"すべてのコメントを見る"})})]})}function W(e){var s;let{comment:a,currentUserId:t,onLike:n,isPreview:o}=e,m=!!t&&(null===(s=a.likedBy)||void 0===s?void 0:s.includes(t));return(0,l.jsx)(r.Zb,{className:"p-4",children:(0,l.jsxs)("div",{className:"flex space-x-3",children:[(0,l.jsxs)(d.qE,{className:"h-10 w-10",children:[(0,l.jsx)(d.F$,{src:a.userAvatar}),(0,l.jsx)(d.Q5,{children:a.userName[0]})]}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("h4",{className:"font-semibold text-sm",children:a.userName}),a.moderationScore&&a.moderationScore>.95&&(0,l.jsx)(c.C,{variant:"secondary",className:"text-xs",children:"信頼できるユーザー"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("time",{className:"text-xs text-muted-foreground",children:(0,k.SY)(a.createdAt.toDate())}),!o&&(0,l.jsxs)(J.h_,{children:[(0,l.jsx)(J.$F,{asChild:!0,children:(0,l.jsx)(i.z,{variant:"ghost",size:"icon",className:"h-6 w-6",children:(0,l.jsx)(q.Z,{className:"h-3 w-3"})})}),(0,l.jsx)(J.AW,{align:"end",children:(0,l.jsxs)(J.Xi,{children:[(0,l.jsx)(G.Z,{className:"h-4 w-4 mr-2"}),"報告"]})})]})]})]}),(0,l.jsx)("p",{className:"mt-1 text-sm leading-relaxed",children:a.text}),(0,l.jsxs)("div",{className:"flex items-center gap-4 mt-3",children:[(0,l.jsxs)(i.z,{variant:"ghost",size:"sm",className:"h-8 px-2 ".concat(m?"text-primary":"text-muted-foreground"),onClick:()=>n(a.id,m),disabled:!t||o,children:[(0,l.jsx)(L.Z,{className:"h-4 w-4 mr-1 ".concat(m?"fill-current":"")}),a.likes||0]}),!o&&(0,l.jsxs)(i.z,{variant:"ghost",size:"sm",className:"h-8 px-2 text-muted-foreground",children:[(0,l.jsx)(b.Z,{className:"h-4 w-4 mr-1"}),"返信"]})]})]})]})})}var H=a(97398),ee=a(79270);function es(e){var s,a,x,z,Z;let{candidateId:C}=e,A=(0,n.useRouter)(),[O,S]=(0,t.useState)(null),[R,E]=(0,t.useState)(!1),{data:I,isLoading:Y,error:D}=(0,w.vG)(C);if(Y)return(0,l.jsx)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:(0,l.jsx)(ea,{})});if(D||!I)return(0,l.jsx)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:(0,l.jsx)(u.bZ,{className:"border-red-200 bg-red-50",children:(0,l.jsx)(u.X,{children:"候補者の情報を読み込めませんでした。"})})});let _=(0,k.L_)(I.policies||[]);return(0,l.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,l.jsx)(i.z,{variant:"ghost",size:"icon",onClick:()=>A.back(),children:(0,l.jsx)(h.Z,{className:"h-4 w-4"})}),(0,l.jsx)("h1",{className:"text-2xl font-bold",children:"候補者詳細"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,l.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,l.jsxs)(r.Zb,{children:[(0,l.jsx)(r.Ol,{children:(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsxs)(d.qE,{className:"h-20 w-20",children:[(0,l.jsx)(d.F$,{src:I.photoUrl,alt:I.name}),(0,l.jsx)(d.Q5,{className:"bg-primary text-primary-foreground text-lg",children:(0,k.Qm)(I.name)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(r.ll,{className:"text-3xl",children:I.name}),(0,l.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[(0,l.jsxs)("span",{children:[I.age,"歳"]}),(0,l.jsx)("span",{children:"•"}),(0,l.jsx)("span",{children:I.party}),(0,l.jsx)("span",{children:"•"}),(0,l.jsx)(c.C,{variant:"incumbent"===I.status?"default":"secondary",children:(0,k.rp)(I.status)})]})]})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(i.z,{variant:"outline",size:"icon",children:(0,l.jsx)(f.Z,{className:"h-4 w-4"})}),(0,l.jsx)(i.z,{variant:"outline",size:"icon",children:(0,l.jsx)(j.Z,{className:"h-4 w-4"})})]})]})}),(0,l.jsxs)(r.aY,{className:"space-y-6",children:[I.slogan&&(0,l.jsxs)("blockquote",{className:"border-l-4 border-primary pl-4 italic text-lg",children:['"',I.slogan,'"']}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(p.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,l.jsx)("span",{className:"text-sm",children:I.prefecture})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(N.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,l.jsx)("span",{className:"text-sm",children:I.electionType})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(g.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,l.jsx)("span",{className:"text-sm",children:I.electionDate?(0,k.p6)(I.electionDate.toDate()):"未定"})]}),I.achievements&&I.achievements.length>0&&(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(v.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,l.jsxs)("span",{className:"text-sm",children:["実績 ",I.achievements.length,"件"]})]})]}),(0,l.jsxs)("div",{className:"bg-primary/10 p-4 rounded-lg",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsx)("span",{className:"text-lg font-semibold",children:"平均実現可能性スコア"}),(0,l.jsx)(ee.$,{score:_,size:"lg",showLabel:!0})]}),(0,l.jsx)(m.E,{value:_,className:"h-3"}),(0,l.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:[(null===(s=I.policies)||void 0===s?void 0:s.length)||0,"項目の公約から算出",I.isAnalyzedByAI&&" (AI分析済み)"]})]})]})]}),(0,l.jsxs)(o.mQ,{defaultValue:"policies",className:"w-full",children:[(0,l.jsxs)(o.dr,{className:"grid w-full grid-cols-4",children:[(0,l.jsx)(o.SP,{value:"policies",children:"公約一覧"}),(0,l.jsx)(o.SP,{value:"analysis",children:"政策分析"}),(0,l.jsx)(o.SP,{value:"achievements",children:"実績"}),(0,l.jsx)(o.SP,{value:"comparison",children:"可視化"})]}),(0,l.jsx)(o.nU,{value:"policies",className:"space-y-4",children:I.policies&&I.policies.length>0?I.policies.map(e=>(0,l.jsxs)(r.Zb,{className:"cursor-pointer hover:shadow-md transition-shadow",children:[(0,l.jsx)(r.Ol,{children:(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)(r.ll,{className:"text-lg",children:e.title}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.description})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[(0,l.jsx)(c.C,{variant:"outline",children:e.category}),(0,l.jsx)(ee.$,{score:e.feasibilityScore,size:"md"})]})]})}),(0,l.jsx)(r.aY,{children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(m.E,{value:e.feasibilityScore,className:"flex-1 mr-4"}),(0,l.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>{S(e),E(!0)},children:"詳細を見る"})]})})]},e.id)):(0,l.jsx)(r.Zb,{className:"p-8 text-center",children:(0,l.jsx)("p",{className:"text-muted-foreground",children:"公約情報がまだ登録されていません"})})}),(0,l.jsx)(o.nU,{value:"analysis",children:(0,l.jsxs)(r.Zb,{children:[(0,l.jsx)(r.Ol,{children:(0,l.jsx)(r.ll,{children:"AI分析レポート"})}),(0,l.jsx)(r.aY,{children:I.isAnalyzedByAI?(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,l.jsxs)("div",{className:"text-center p-4 bg-muted rounded-lg",children:[(0,l.jsxs)("div",{className:"text-2xl font-bold text-primary",children:[_,"%"]}),(0,l.jsx)("div",{className:"text-sm text-muted-foreground",children:"平均スコア"})]}),(0,l.jsxs)("div",{className:"text-center p-4 bg-muted rounded-lg",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-green-600",children:(null===(a=I.policies)||void 0===a?void 0:a.filter(e=>e.feasibilityScore>=80).length)||0}),(0,l.jsx)("div",{className:"text-sm text-muted-foreground",children:"高実現性政策"})]}),(0,l.jsxs)("div",{className:"text-center p-4 bg-muted rounded-lg",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:(null===(x=I.policies)||void 0===x?void 0:x.filter(e=>"high"===e.impact).length)||0}),(0,l.jsx)("div",{className:"text-sm text-muted-foreground",children:"高影響政策"})]}),(0,l.jsxs)("div",{className:"text-center p-4 bg-muted rounded-lg",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:(null===(z=I.policies)||void 0===z?void 0:z.length)||0}),(0,l.jsx)("div",{className:"text-sm text-muted-foreground",children:"総政策数"})]})]}),(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:"この候補者の公約は最新のAI技術により詳細に分析されています。 各政策の実現可能性は技術的、政治的、財政的、時間軸の4つの観点から評価されています。"})]}):(0,l.jsx)("p",{className:"text-muted-foreground",children:"この候補者の公約はまだAI分析されていません。"})})]})}),(0,l.jsx)(o.nU,{value:"achievements",className:"space-y-4",children:I.achievements&&I.achievements.length>0?I.achievements.map((e,s)=>(0,l.jsx)(r.Zb,{children:(0,l.jsx)(r.aY,{className:"pt-6",children:(0,l.jsx)("p",{children:e})})},s)):(0,l.jsx)(r.Zb,{className:"p-8 text-center",children:(0,l.jsx)("p",{className:"text-muted-foreground",children:"実績情報がまだ登録されていません"})})}),(0,l.jsx)(o.nU,{value:"comparison",className:"space-y-6",children:I.policies&&I.policies.length>0?(0,l.jsx)(H.PolicyComparisonChart,{policies:I.policies,title:"".concat(I.name,"の政策実現可能性")}):(0,l.jsx)(r.Zb,{className:"p-8 text-center",children:(0,l.jsx)("p",{className:"text-muted-foreground",children:"可視化する政策データがありません"})})})]})]}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)(r.Zb,{children:[(0,l.jsx)(r.Ol,{children:(0,l.jsx)(r.ll,{className:"text-lg",children:"アクション"})}),(0,l.jsxs)(r.aY,{className:"space-y-3",children:[(0,l.jsxs)(i.z,{className:"w-full",variant:"outline",children:[(0,l.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"他候補者と比較"]}),(0,l.jsxs)(i.z,{className:"w-full",variant:"outline",children:[(0,l.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"議論に参加"]})]})]}),(0,l.jsxs)(r.Zb,{children:[(0,l.jsx)(r.Ol,{children:(0,l.jsx)(r.ll,{className:"text-lg",children:"統計情報"})}),(0,l.jsxs)(r.aY,{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:"公約数"}),(0,l.jsx)("span",{className:"font-semibold",children:(null===(Z=I.policies)||void 0===Z?void 0:Z.length)||0})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:"平均スコア"}),(0,l.jsxs)("span",{className:"font-semibold",children:[_,"%"]})]}),I.achievements&&(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:"実績数"}),(0,l.jsx)("span",{className:"font-semibold",children:I.achievements.length})]})]})]}),(0,l.jsxs)(r.Zb,{children:[(0,l.jsx)(r.Ol,{children:(0,l.jsx)(r.ll,{className:"text-lg",children:"最新のコメント"})}),(0,l.jsx)(r.aY,{children:(0,l.jsx)(M,{candidateId:C,preview:!0})})]})]})]}),(0,l.jsx)(B,{policy:O,open:R,onOpenChange:E})]})}function ea(){return(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,l.jsx)(x.O,{className:"h-10 w-10"}),(0,l.jsx)(x.O,{className:"h-8 w-32"})]}),(0,l.jsxs)(r.Zb,{children:[(0,l.jsx)(r.Ol,{children:(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)(x.O,{className:"h-20 w-20 rounded-full"}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(x.O,{className:"h-8 w-48"}),(0,l.jsx)(x.O,{className:"h-4 w-32"})]})]})}),(0,l.jsxs)(r.aY,{className:"space-y-4",children:[(0,l.jsx)(x.O,{className:"h-4 w-full"}),(0,l.jsx)(x.O,{className:"h-4 w-3/4"}),(0,l.jsx)("div",{className:"grid grid-cols-4 gap-4",children:Array.from({length:4}).map((e,s)=>(0,l.jsx)(x.O,{className:"h-4 w-full"},s))})]})]})]})}},96246:function(e,s,a){"use strict";a.d(s,{F$:function(){return c},Q5:function(){return d},qE:function(){return i}});var l=a(57437),t=a(2265),n=a(61146),r=a(93448);let i=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)(n.fC,{ref:s,className:(0,r.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...t})});i.displayName=n.fC.displayName;let c=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)(n.Ee,{ref:s,className:(0,r.cn)("aspect-square h-full w-full",a),...t})});c.displayName=n.Ee.displayName;let d=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)(n.NY,{ref:s,className:(0,r.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...t})});d.displayName=n.NY.displayName},12381:function(e,s,a){"use strict";a.d(s,{z:function(){return d}});var l=a(57437),t=a(2265),n=a(37053),r=a(90535),i=a(93448);let c=(0,r.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=t.forwardRef((e,s)=>{let{className:a,variant:t,size:r,asChild:d=!1,...o}=e,m=d?n.g7:"button";return(0,l.jsx)(m,{className:(0,i.cn)(c({variant:t,size:r,className:a})),ref:s,...o})});d.displayName="Button"},32060:function(e,s,a){"use strict";a.d(s,{$F:function(){return m},AW:function(){return x},Ju:function(){return h},VD:function(){return f},Xi:function(){return u},h_:function(){return o}});var l=a(57437),t=a(2265),n=a(70085),r=a(10407),i=a(30401),c=a(40519),d=a(93448);let o=n.fC,m=n.xz;n.ZA,n.Uv,n.Tr,n.Ee,t.forwardRef((e,s)=>{let{className:a,inset:t,children:i,...c}=e;return(0,l.jsxs)(n.fF,{ref:s,className:(0,d.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",a),...c,children:[i,(0,l.jsx)(r.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=n.fF.displayName,t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)(n.tu,{ref:s,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...t})}).displayName=n.tu.displayName;let x=t.forwardRef((e,s)=>{let{className:a,sideOffset:t=4,...r}=e;return(0,l.jsx)(n.Uv,{children:(0,l.jsx)(n.VY,{ref:s,sideOffset:t,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})})});x.displayName=n.VY.displayName;let u=t.forwardRef((e,s)=>{let{className:a,inset:t,...r}=e;return(0,l.jsx)(n.ck,{ref:s,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",a),...r})});u.displayName=n.ck.displayName,t.forwardRef((e,s)=>{let{className:a,children:t,checked:r,...c}=e;return(0,l.jsxs)(n.oC,{ref:s,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:r,...c,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(n.wU,{children:(0,l.jsx)(i.Z,{className:"h-4 w-4"})})}),t]})}).displayName=n.oC.displayName,t.forwardRef((e,s)=>{let{className:a,children:t,...r}=e;return(0,l.jsxs)(n.Rk,{ref:s,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...r,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(n.wU,{children:(0,l.jsx)(c.Z,{className:"h-2 w-2 fill-current"})})}),t]})}).displayName=n.Rk.displayName;let h=t.forwardRef((e,s)=>{let{className:a,inset:t,...r}=e;return(0,l.jsx)(n.__,{ref:s,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",a),...r})});h.displayName=n.__.displayName;let f=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)(n.Z0,{ref:s,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...t})});f.displayName=n.Z0.displayName},7204:function(e,s,a){"use strict";a.d(s,{E:function(){return i}});var l=a(57437),t=a(2265),n=a(60610),r=a(93448);let i=t.forwardRef((e,s)=>{let{className:a,value:t,...i}=e;return(0,l.jsx)(n.fC,{ref:s,className:(0,r.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...i,children:(0,l.jsx)(n.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(t||0),"%)")}})})});i.displayName=n.fC.displayName},69140:function(e,s,a){"use strict";a.d(s,{O:function(){return n}});var l=a(57437),t=a(93448);function n(e){let{className:s,...a}=e;return(0,l.jsx)("div",{className:(0,t.cn)("animate-pulse rounded-md bg-muted",s),...a})}},27638:function(e,s,a){"use strict";a.d(s,{is:function(){return i},ni:function(){return r}});var l=a(43301),t=a(5978),n=a(60532);let r=async()=>{await (0,l.w7)(n.I8)},i=async e=>{let s=await (0,t.QT)((0,t.JU)(n.db,"users",e));return s.exists()?{id:e,...s.data()}:null}},85687:function(e,s,a){"use strict";a.d(s,{a:function(){return i}});var l=a(2265),t=a(60532),n=a(43301),r=a(27638);function i(){let[e,s]=(0,l.useState)({user:null,userData:null,loading:!0,error:null});return(0,l.useEffect)(()=>{let e=(0,n.Aj)(t.I8,async e=>{try{if(e){let a=await (0,r.is)(e.uid);s({user:e,userData:a,loading:!1,error:null})}else s({user:null,userData:null,loading:!1,error:null})}catch(e){s({user:null,userData:null,loading:!1,error:e instanceof Error?e.message:"Authentication error"})}});return()=>e()},[]),e}}},function(e){e.O(0,[358,139,138,634,447,637,983,823,100,726,971,117,744],function(){return e(e.s=35024)}),_N_E=e.O()}]);